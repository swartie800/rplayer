!function(){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function a(e,t,a){return t&&i(e.prototype,t),a&&i(e,a),e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e}).apply(this,arguments)}var s={adTagParameters:{},apiKey:"",assetKey:"",cmsID:"",locale:"",debug:!1,liveAdMessage:"Playing Ad",requestTimeout:3e3,videoID:""},r=function(){function i(a,n){for(var r in t(this,i),s)if(s.hasOwnProperty(r)){var l=a[r],d=s[r],u=e(d);if(void 0!==l){if("boolean"!==u&&"number"!==u||(l=o(l)),e(l)!==u)throw new Error("invalid parameter: "+r+" should be a "+u);this[r]=l}else this[r]=d}this.setLocalizationOptions(n)}return a(i,[{key:"setLocalizationOptions",value:function(e){var t=e.loadingAd,i=e.admessage,a=e.podmessage,n=e.cuetext;this.loadingMessage=t,this.admessage=i,this.adcounterdynamic=a,this.cuetext=n}}]),i}();function o(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}var l=null;function d(e){if(l)return l;if(window.google&&google.ima&&google.ima.dai)return l=Promise.resolve();var t=["//","imasdk.googleapis.com/js/sdkloader/ima3_dai.js"];"file:"===document.location.protocol&&t.unshift("https:");var i=new(0,e.scriptloader)(t.join(""));return l=i.load().then((function(){}))}var u={};var c=function(){function e(i){t(this,e),this.player_=i,this.adBreakIds_={},this.adIds_={},this.currentAd_=null}return a(e,[{key:"getAdBreakId_",value:function(e){return h("b".concat(_(e)||e.getAdId()),this.adBreakIds_)}},{key:"getAdPlayId_",value:function(e){return h("b".concat(_(e),"a").concat(e.getAdId()),this.adIds_)}},{key:"adEventObject",value:function(e){var t=e||this.currentAd_,i={client:"dai",viewable:this.player_.getViewable()};if(!t)return i;this.currentAd_=t,i.id=this.getAdBreakId_(t),i.adPlayId=this.getAdPlayId_(t),i.adtitle=t.getTitle(),i.adsystem=t.getAdSystem(),i.creativetype="application/x-mpegURL",i.linear="linear";var a=t.getAdPodInfo();if(a){var n=a.getTotalAds();n>1&&(i.sequence=a.getAdPosition(),i.podcount=n),i.adposition=function(e){var t=e.getTimeOffset();if(0===t)return"pre";if(-1===t)return"post";return"mid"}(a)}return i}},{key:"clearAd",value:function(){this.currentAd_=null}}]),e}();function h(e,t){if(e){var i=t[e];return i||(t[e]=(a=12,i=new Array(a+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,a))),i}var a;return"-1"}function _(e){var t=e.getAdPodInfo();return t?"".concat(t.getTimeOffset()).replace(/[-.]/g,"N"):null}var m=function(){function e(i,a,n,s){var r=this;t(this,e),this.item_=i,this.options_=a,this.player_=n,this.daiUtils_=new c(n),this.adCues_=[],this.utils_=n.utils,this.playerContainer_=n.getContainer(),this.playerPositionBeforeMidroll_=null,this.instream_=null,this.timeoutAdStart_=-1,this.isVOD_=a.cmsID&&a.videoID,this.liveMode_=!this.isVOD_&&a.assetKey,this.video_=null,this.streamManager_=null,this.streamManagerEvents_=null,this.streamEventHandler_=function(e){r.onStreamEvent_(e)},this.adUiElement_=s,this.utils_.addClass(s,"jw-plugin-dai")}return a(e,[{key:"beforePlay",value:function(){var e=this;this.instream_||this.destroyed_()||(clearTimeout(this.timeoutAdStart_),this.timeoutAdStart_=setTimeout((function(){e.destroyed_()||e.destroy()}),this.options_.requestTimeout),this.video_=this.player_.getConfig().mediaElement,this.instream_=this.player_.createInstream().init().setText(this.options_.loadingMessage),this.init_().catch((function(){e.stopBlocking_()})))}},{key:"pause",value:function(){this.video_&&this.video_.pause()}},{key:"resume",value:function(){this.video_&&this.video_.play()}},{key:"stopBlocking_",value:function(){this.destroyed_()||(clearTimeout(this.timeoutAdStart_),this.destroyBlockingInstreamPlayer_())}},{key:"init_",value:function(){var e=this;return d().then((function(){if(e.destroyed_())return null;var t,i=google.ima.dai.api.StreamEvent.Type,a=new google.ima.dai.api.UiSettings;if(a.setLocale(e.options_.locale||e.player_.getConfig().language),e.streamManager_=new google.ima.dai.api.StreamManager(e.video_,e.adUiElement_,a),e.streamManagerEvents_=[i.CUEPOINTS_CHANGED,i.LOADED,i.AD_BREAK_STARTED,i.AD_BREAK_ENDED,i.STARTED,i.AD_PROGRESS,i.CLICK,i.COMPLETE,i.ERROR],e.streamManager_.addEventListener(e.streamManagerEvents_,e.streamEventHandler_,!1),e.isVOD_)(t=new google.ima.dai.api.VODStreamRequest).contentSourceId=e.options_.cmsID,t.videoId=e.options_.videoID;else{if(!e.liveMode_)throw new Error("Invalid options");(t=new google.ima.dai.api.LiveStreamRequest).assetKey=e.options_.assetKey,e.player_.off("meta",e.handleMeta_,e),e.player_.on("meta",e.handleMeta_,e)}t.apiKey=e.options_.apiKey,t.adTagParameters=e.options_.adTagParameters,e.streamManager_.requestStream(t)}))}},{key:"loadStream_",value:function(e){var t=this.player_.getPlaylistItem(this.player_.getPlaylistIndex()),i=e.url;t.sources=[n(t.sources[0],{file:i})],this.instream_&&(this.instream_.replacePlaylistItem(t),this.stopBlocking_())}},{key:"onStreamEvent_",value:function(e){var t=this,i=google.ima.dai.api.StreamEvent.Type,a=this.daiUtils_.adEventObject(e.getAd());switch(e.type){case i.CUEPOINTS_CHANGED:var s=this.adCues_=e.getStreamData().cuepoints;if(s&&s.length){var r=s.filter((function(e){return e.start>0})).map((function(e){return{begin:e.start,text:t.options_.cuetext}}));this.player_.setCues(r),this.player_.on("time",this.checkMidrolls_,this)}break;case i.LOADED:clearTimeout(this.timeoutAdStart_),this.loadStream_(e.getStreamData());break;case i.AD_BREAK_STARTED:"playing"!==this.player_.getState()&&this.player_.play(),this.player_.trigger("adBreakStart",a),this.setAdsMode_(!0),this.instream_.once("destroyed",(function(){t.instream_=null,t.player_.trigger("adBreakEnd",a),t.daiUtils_.clearAd()}));break;case i.AD_BREAK_ENDED:this.instream_.off().once("destroyed",(function(){t.instream_=null,t.player_.trigger("adBreakEnd",a),t.daiUtils_.clearAd()})),this.setAdsMode_(!1);break;case i.STARTED:this.player_.trigger("adImpression",a);var o=this.daiUtils_.adEventObject(null);o.newstate="playing",this.instream_.setState(o);break;case i.AD_PROGRESS:if(!this.instream_)return;this.handleTime_(e.getStreamData().adProgressData,a);break;case i.CLICK:this.player_.trigger("adClick",a),this.player_.pause();break;case i.COMPLETE:this.player_.trigger("adComplete",a),this.daiUtils_.clearAd();break;case i.ERROR:var l=n({id:"-1",message:"Ad Error: "+e.getStreamData().errorMessage},a);this.player_.trigger("adError",l),this.daiUtils_.clearAd()}}},{key:"checkMidrolls_",value:function(e){if(this.adCues_.length){for(var t=e.position,i=-1,a=0;a<this.adCues_.length&&!(this.adCues_[a].start>t);a++)i=a;i>-1&&!this.adCues_[i].played&&t!==this.adCues_[i].start&&(this.playerPositionBeforeMidroll_=t,this.player_.seek(this.adCues_[i].start))}}},{key:"handleMeta_",value:function(e){var t=e.metadata;this.streamManager_&&t&&this.streamManager_.onTimedMetadata(t)}},{key:"setAdsMode_",value:function(e){var t=this;this.player_.off("time",this.checkMidrolls_,this),e?(this.utils_.addClass(this.playerContainer_,"jw-flag-ads jw-flag-ads-dai"),this.instream_||(this.instream_=this.player_.createInstream()),this.instream_.enableAdsMode(),this.liveMode_&&this.instream_.setText(this.options_.liveAdMessage),this.instream_.off(null,null,this).on("state",(function(e){t.instream_.setState(e)}),this),this.liveMode_&&(this.instream_.on("meta",this.handleMeta_,this),this.handleMeta_({metadata:this.player_.getItemMeta()}))):(this.utils_.removeClass(this.playerContainer_,"jw-flag-ads jw-flag-ads-dai"),this.isVOD_&&this.player_.on("time",this.checkMidrolls_,this),this.destroyBlockingInstreamPlayer_(),this.playerPositionBeforeMidroll_&&(this.video_.currentTime=this.playerPositionBeforeMidroll_,this.playerPositionBeforeMidroll_=null))}},{key:"handleTime_",value:function(e,t){var i=e.currentTime,a=e.duration;if(t.position=i,t.duration=a,this.instream_.setTime(t),this.isVOD_){var n=e.adPosition,s=e.totalAds,r=this.options_.admessage||"",o=this.options_.adcounterdynamic||"";r=r.replace(/xx/gi,"".concat(Math.ceil(a-i))),s>1&&(r=(o=(o=o.replace(/__AD_POD_CURRENT__/g,"".concat(n))).replace(/__AD_POD_LENGTH__/g,"".concat(s)))+" "+r),this.instream_.setText(r)}}},{key:"destroyBlockingInstreamPlayer_",value:function(){this.instream_&&(this.instream_.destroy(),this.instream_=null)}},{key:"destroy",value:function(){clearTimeout(this.timeoutAdStart_),this.destroyed_()||(this.player_.off(null,null,this),this.streamManager_&&(this.streamManager_.removeEventListener(this.streamManagerEvents_,this.streamEventHandler_,!1),this.streamManager_.reset()),this.stopBlocking_(),this.options_=null,this.video_=null,this.player_=null,this.item_=null,this.streamManager_=null)}},{key:"destroyed_",value:function(){return!this.item_}}]),e}();!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".jw-plugin-dai{top:0;left:0;bottom:0}.jwplayer.jw-flag-ads-dai .jw-plugin-dai{width:100%;height:100%}.jwplayer.jw-flag-ads-dai .jw-controlbar{background:0 0!important;pointer-events:none}.jwplayer.jw-flag-ads-dai .jw-controlbar .jw-icon{pointer-events:all}.jwplayer.jw-flag-ads-dai .jw-controlbar .jw-icon-fullscreen:not(.jw-fullscreen-ima){display:none}.jwplayer.jw-flag-ads-dai .jw-controlbar .jw-fullscreen-ima{display:flex}"),(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)("dai","8.0",(function(e,t,i){var a,s=e.utils,o=e.getConfig(),l=new r(t||{},o.localization.advertising);d(s).catch(s.noop);var c=o.key;function h(){a&&(a.destroy(),a=null)}this.version="0.5.4",n(this,e.Events),e.pauseAd=function(e){e="boolean"!=typeof e||e,a&&(e?a.pause():a.resume())},e.on("ready",(function(){o.localization=e.getConfig().localization,l.setLocalizationOptions(o.localization.advertising),d(s).catch((function(){e.getAdBlock()&&f("Ad playback blocked by an ad blocker",2e4)})),_.catch((function(e){f("Ad Error: "+e.message,60002)}))}),this).on("playlistItem",(function(t){h();var s=t.item,r=n({},l,s.daiSetting);(r.cmsID&&r.videoID||r.assetKey)&&(s.preload="none",a=new m(s,r,e,i),e.once("beforePlay",a.beforePlay,a))}),this).on("destroyPlugin",h,this);var _=function(e,t,i){var a=u[t];return a||(u[t]=new Promise((function(a,n){!function(i){var a=new e.key(t);if("unlimited"===a.edition())return i();var n=["//","entitlements.jwplayer.com","/",a.token(),".json"];"file:"===window.location.protocol&&n.unshift("https:"),e.ajax(n.join(""),(function(e){i(e&&e.response)}),(function(){i()}),{timeout:1e4,responseType:"json"})}((function(e){var t,s,r=e||{};!0===i.outstream?(t=!1!==r.canPlayOutstreamAds,s="Outstream Ad Limit Reached"):(t=!1!==r.canPlayAds,s="Ad Limit Reached"),!1!==t?a({message:"Can Play Ads"}):n({message:s})}))})))}(s,c,t);function f(t,i){h(),e.off(null,null,this),e.trigger("adError",{id:"-1",client:"dai",message:t,code:900,adErrorCode:i,tag:""})}_.catch(s.noop),this.destroy=h}))}();
